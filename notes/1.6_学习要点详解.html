<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1.6章学习要点详解</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: "Microsoft YaHei", "PingFang SC", Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 30px 20px;
            line-height: 1.8;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #333;
        }
        .container {
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            border-bottom: 4px solid #3498db;
            padding-bottom: 15px;
            margin-bottom: 30px;
            font-size: 2.2em;
        }
        h2 {
            color: #34495e;
            margin-top: 40px;
            margin-bottom: 20px;
            border-left: 5px solid #3498db;
            padding-left: 15px;
            font-size: 1.6em;
        }
        h3 {
            color: #555;
            margin-top: 25px;
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        p { margin: 15px 0; text-align: justify; }
        code {
            background: #f4f4f4;
            padding: 3px 8px;
            border-radius: 4px;
            font-family: "Consolas", "Monaco", monospace;
            font-size: 0.9em;
            color: #e74c3c;
        }
        pre {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            font-family: "Consolas", "Monaco", monospace;
            line-height: 1.5;
        }
        pre code {
            background: transparent;
            color: inherit;
            padding: 0;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 20px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px 15px;
            text-align: left;
        }
        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: bold;
        }
        tr:nth-child(even) { background: #f8f9fa; }
        tr:hover { background: #e3f2fd; }
        ul, ol { padding-left: 30px; margin: 15px 0; }
        li { margin: 10px 0; }
        strong { color: #2c3e50; font-weight: 600; }
        hr {
            border: none;
            border-top: 2px solid #ecf0f1;
            margin: 30px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>第1.6章：直方图与散点图 - 超详细解释</h1>
<br>
<h2>📊 第一部分：日收益率（Daily Returns）</h2>
<br>
<h3>什么是日收益率？</h3>
<br>
<strong>生活化理解：</strong>
<p>想象你买了一只股票：</p>
<ul>
<li>昨天价格：100元</li>
<li>今天价格：105元</li>
<li><strong>日收益率 = (105/100) - 1 = 0.05 = 5%</strong></li>
</ul>
<br>
<p>如果今天价格是95元：</p>
<ul>
<li><strong>日收益率 = (95/100) - 1 = -0.05 = -5%</strong>（亏了5%）</li>
</ul>
<br>
<h3>为什么要计算日收益率？</h3>
<br>
<strong>问题：</strong> 股票A从100元涨到110元，股票B从10元涨到11元，哪个涨得多？
<ul>
<li>看起来A涨了10元，B只涨了1元</li>
<li>但实际上：A涨了10%，B也涨了10%！<strong>收益率相同</strong></li>
</ul>
<br>
<strong>结论：</strong> 收益率让我们可以公平比较不同价格的股票
<br>
<h3>公式详解</h3>
<br>
<pre><code>daily_returns[1:] = (df[1:] / df[:-1].values) - 1
</code></pre>
<br>
<strong>拆解：</strong>
<ul>
<li><code>df[1:]</code> = 今天及以后的价格</li>
<li><code>df[:-1]</code> = 昨天及以前的价格</li>
<li><code>df[1:] / df[:-1]</code> = 今天价格 ÷ 昨天价格（得到倍数）</li>
<li><code>- 1</code> = 减去1，得到增长率</li>
</ul>
<br>
<strong>例子：</strong>
<pre><code>日期        价格    计算过程              日收益率
<p>1月1日      100     (第一行，设为0)       0%</p>
<p>1月2日      105     (105/100) - 1 = 0.05  5%</p>
<p>1月3日      98      (98/105) - 1 = -0.067 -6.7%</p>
<p>1月4日      102     (102/98) - 1 = 0.041  4.1%</p>
</code></pre>
<br>
<hr>
<br>
<h2>📈 第二部分：直方图（Histogram）</h2>
<br>
<h3>什么是直方图？</h3>
<br>
<strong>生活化理解：</strong>
<p>想象你记录了100天的股票收益率，直方图就是把这些收益率"分类统计"：</p>
<br>
<pre><code>收益率范围        出现天数（柱子高度）
<p>-5% 到 -3%       5天  ████</p>
<p>-3% 到 -1%       15天  ████████████████</p>
<p>-1% 到 1%        50天  ████████████████████████████████████████████████</p>
<p>1% 到 3%         20天  ████████████████████</p>
<p>3% 到 5%         8天   ████████</p>
<p>5% 到 7%         2天   ██</p>
</code></pre>
<br>
<strong>直方图告诉你：</strong>
<ul>
<li>大部分时候收益率在-1%到1%之间（正常波动）</li>
<li>偶尔会有大涨大跌（极端情况）</li>
</ul>
<br>
<h3>为什么用直方图？</h3>
<br>
<strong>问题：</strong> 只看价格曲线，你只能看到"涨了"或"跌了"，但看不到：
<ul>
<li>涨跌的幅度分布</li>
<li>极端情况出现的频率</li>
<li>风险大小</li>
</ul>
<br>
<strong>直方图帮你看到：</strong>
<p>1. <strong>分布形状</strong>：是正态分布（钟形）还是偏斜？</p>
<p>2. <strong>风险大小</strong>：柱子越分散 = 波动越大 = 风险越高</p>
<p>3. <strong>极端事件</strong>：尾部有多长 = 极端涨跌的频率</p>
<br>
<h3>Bins（分组数）的作用</h3>
<br>
<strong>bins=10：</strong> 分成10组，每组范围大，细节少
<pre><code>-10%到-8%, -8%到-6%, -6%到-4%, ... 8%到10%
</code></pre>
<br>
<strong>bins=20：</strong> 分成20组，每组范围小，细节多
<pre><code>-10%到-9%, -9%到-8%, -8%到-7%, ... 9%到10%
</code></pre>
<br>
<strong>选择原则：</strong>
<ul>
<li>bins太少：看不清细节</li>
<li>bins太多：太琐碎，看不清整体</li>
<li><strong>通常用20个bins比较合适</strong></li>
</ul>
<br>
<hr>
<br>
<h2>📊 第三部分：统计指标（Mean, Std, Kurtosis）</h2>
<br>
<h3>1. 均值（Mean）- 平均收益率</h3>
<br>
<strong>生活化理解：</strong>
<p>你100天的收益率加起来除以100，就是平均每天赚（或亏）多少</p>
<br>
<strong>例子：</strong>
<pre><code>100天的收益率：+2%, -1%, +0.5%, -0.3%, +1.2%, ...
<p>均值 = 0.05% = 平均每天赚0.05%</p>
</code></pre>
<br>
<strong>在直方图上：</strong>
<ul>
<li>均值用<strong>白色虚线</strong>标记</li>
<li>如果均值在0的右边 = 总体赚钱</li>
<li>如果均值在0的左边 = 总体亏钱</li>
</ul>
<br>
<h3>2. 标准差（Std）- 波动率/风险</h3>
<br>
<strong>生活化理解：</strong>
<p>标准差衡量"收益率有多分散"</p>
<ul>
<li><strong>标准差小</strong> = 收益率都集中在均值附近 = <strong>风险低，稳定</strong></li>
<li><strong>标准差大</strong> = 收益率分散，有时大涨有时大跌 = <strong>风险高，不稳定</strong></li>
</ul>
<br>
<strong>例子对比：</strong>
<pre><code>股票A（稳定）：收益率总是在 0% ± 1% 之间
<p>标准差 = 0.5%  → 风险低</p>
<br>
<p>股票B（波动大）：收益率在 -5% 到 +5% 之间乱跳</p>
<p>标准差 = 3%    → 风险高</p>
</code></pre>
<br>
<strong>在直方图上：</strong>
<ul>
<li>标准差用<strong>红色虚线</strong>标记（+std 和 -std）</li>
<li>柱子越集中在均值附近 = 标准差越小 = 风险越小</li>
<li>柱子越分散 = 标准差越大 = 风险越大</li>
</ul>
<br>
<strong>实际意义：</strong>
<ul>
<li>如果收益率在 ±1个标准差内 = 68%的概率（正常情况）</li>
<li>如果收益率在 ±2个标准差外 = 极端情况（很少见）</li>
</ul>
<br>
<h3>3. 峰度（Kurtosis）- 尾部风险</h3>
<br>
<strong>生活化理解：</strong>
<p>峰度衡量"极端事件出现的频率"</p>
<br>
<strong>对比：</strong>
<pre><code>正态分布（Kurtosis = 3）：
<ul>
<li>大部分收益率在中间</li>
<li>极端涨跌很少见</li>
<li>像"钟形"曲线</li>
</ul>
<br>
<p>高峰度（Kurtosis > 3）：</p>
<ul>
<li>大部分收益率在中间</li>
<li>但极端涨跌比预期多！</li>
<li>像"尖峰厚尾"（中间尖，两边厚）</li>
</ul>
</code></pre>
<br>
<strong>实际意义：</strong>
<ul>
<li><strong>Kurtosis = 3</strong>：正常，极端事件符合预期</li>
<li><strong>Kurtosis > 3</strong>：<strong>危险！</strong> 极端涨跌比预期多，风险高</li>
<li><strong>Kurtosis < 3</strong>：极端事件比预期少，相对安全</li>
</ul>
<br>
<strong>例子：</strong>
<pre><code>股票A：Kurtosis = 2.5
<p>→ 极端事件少，相对安全</p>
<br>
<p>股票B：Kurtosis = 5.0</p>
<p>→ 极端事件多！可能突然大涨或大跌</p>
<p>→ 投资需谨慎</p>
</code></pre>
<br>
<hr>
<br>
<h2>📊 第四部分：散点图（Scatterplots）与相关性</h2>
<br>
<h3>什么是散点图？</h3>
<br>
<strong>生活化理解：</strong>
<p>把两只股票每天的收益率画成点：</p>
<ul>
<li>X轴 = SPY（市场）的收益率</li>
<li>Y轴 = XOM（某只股票）的收益率</li>
</ul>
<br>
<strong>例子：</strong>
<pre><code>某一天：
<p>SPY涨了2%，XOM涨了2.5%  → 画一个点 (2%, 2.5%)</p>
<p>另一天：</p>
<p>SPY跌了1%，XOM跌了1.2%  → 画一个点 (-1%, -1.2%)</p>
<p>...</p>
<p>画100个点，看它们的关系</p>
</code></pre>
<br>
<h3>散点图的形状告诉你什么？</h3>
<br>
<strong>1. 点聚集在一条线上（正相关）</strong>
<pre><code>    XOM收益率
<p>      ↑</p>
      |    ●
      |  ● ●
      |● ● ●
      |● ● ●
<p>      +<hr><hr>--→ SPY收益率</p>
</code></pre>
<strong>含义：</strong> SPY涨，XOM也涨；SPY跌，XOM也跌
<strong>结论：</strong> 两只股票<strong>同向运动</strong>，相关性高
<br>
<strong>2. 点分散（不相关）</strong>
<pre><code>    XOM收益率
<p>      ↑</p>
      |  ●   ●
      |    ●   ●
      |  ●   ●
      |    ●
<p>      +<hr><hr>--→ SPY收益率</p>
</code></pre>
<strong>含义：</strong> SPY涨跌，XOM不一定跟着涨跌
<strong>结论：</strong> 两只股票<strong>独立</strong>，相关性低
<br>
<strong>3. 点向下倾斜（负相关）</strong>
<pre><code>    XOM收益率
<p>      ↑</p>
      |●
      |  ●
      |    ●
      |      ●
<p>      +<hr><hr>--→ SPY收益率</p>
</code></pre>
<strong>含义：</strong> SPY涨，XOM跌；SPY跌，XOM涨
<strong>结论：</strong> 两只股票<strong>反向运动</strong>（很少见）
<br>
<h3>Beta（β）- 市场敏感度</h3>
<br>
<strong>生活化理解：</strong>
<p>Beta衡量"市场涨1%，这只股票涨多少？"</p>
<br>
<strong>公式：</strong>
<pre><code>Y = Beta × X + Alpha
<p>XOM收益率 = Beta × SPY收益率 + Alpha</p>
</code></pre>
<br>
<strong>Beta值的含义：</strong>
<br>
| Beta值 | 含义 | 例子 |
|<hr><hr>--|<hr><hr>|<hr><hr>|
| <strong>Beta = 1.0</strong> | 与市场同步 | SPY涨2%，股票也涨2% |
| <strong>Beta > 1.0</strong> | 比市场波动大 | SPY涨2%，股票涨3%（更激进） |
| <strong>Beta < 1.0</strong> | 比市场波动小 | SPY涨2%，股票涨1%（更保守） |
| <strong>Beta = 0</strong> | 与市场无关 | SPY涨跌，股票不受影响 |
| <strong>Beta < 0</strong> | 与市场反向 | SPY涨，股票跌（很少见） |
<br>
<strong>实际应用：</strong>
<pre><code>股票A：Beta = 1.5
<p>→ 市场涨10%，它可能涨15%</p>
<p>→ 市场跌10%，它可能跌15%</p>
<p>→ <strong>高风险高收益</strong></p>
<br>
<p>股票B：Beta = 0.7</p>
<p>→ 市场涨10%，它可能涨7%</p>
<p>→ 市场跌10%，它可能跌7%</p>
<p>→ <strong>低风险低收益</strong></p>
</code></pre>
<br>
<strong>在散点图上：</strong>
<ul>
<li>Beta = <strong>回归线的斜率</strong></li>
<li>线越陡 = Beta越大 = 波动越大</li>
<li>线越平 = Beta越小 = 波动越小</li>
</ul>
<br>
<h3>Alpha（α）- 超额收益</h3>
<br>
<strong>生活化理解：</strong>
<p>Alpha衡量"即使市场不动，这只股票也能赚多少？"</p>
<br>
<strong>公式：</strong>
<pre><code>Y = Beta × X + Alpha
</code></pre>
<br>
<strong>Alpha值的含义：</strong>
<br>
| Alpha值 | 含义 |
|<hr><hr><hr>|<hr><hr>|
| <strong>Alpha > 0</strong> | 有超额收益（好股票！） |
| <strong>Alpha = 0</strong> | 没有超额收益（正常） |
| <strong>Alpha < 0</strong> | 表现不如市场（差股票） |
<br>
<strong>实际例子：</strong>
<pre><code>股票A：Alpha = 0.001（0.1%）
<p>→ 即使市场不动，每天也能多赚0.1%</p>
<p>→ 一年下来多赚约25%（复利）</p>
<br>
<p>股票B：Alpha = -0.0005（-0.05%）</p>
<p>→ 即使市场不动，每天也会亏0.05%</p>
<p>→ 表现不如市场</p>
</code></pre>
<br>
<strong>注意：</strong>
<ul>
<li>在现实中，Alpha通常接近0（因为市场是有效的）</li>
<li>如果Alpha长期>0，说明这只股票有"超额能力"</li>
</ul>
<br>
<hr>
<br>
<h2>🎯 实际应用场景</h2>
<br>
<h3>场景1：评估单只股票的风险</h3>
<br>
<strong>步骤：</strong>
<p>1. 计算日收益率</p>
<p>2. 画直方图</p>
<p>3. 看标准差（Std）</p>
<ul>
<li>Std小 = 风险低</li>
<li>Std大 = 风险高</li>
</ul>
<p>4. 看峰度（Kurtosis）</p>
<ul>
<li>Kurtosis > 3 = 极端事件多，需谨慎</li>
</ul>
<br>
<strong>决策：</strong>
<ul>
<li>风险承受能力低 → 选Std小、Kurtosis小的股票</li>
<li>追求高收益 → 可以接受Std大、Kurtosis大的股票</li>
</ul>
<br>
<h3>场景2：构建投资组合（降低风险）</h3>
<br>
<strong>问题：</strong> 如何选择两只股票，让组合风险最小？
<br>
<strong>方法：</strong>
<p>1. 画散点图，看两只股票的相关性</p>
<p>2. 如果点很分散（相关性低）→ <strong>好！</strong> 可以降低风险</p>
<p>3. 如果点聚集在一条线上（相关性高）→ <strong>不好！</strong> 风险不能分散</p>
<br>
<strong>例子：</strong>
<pre><code>组合A：SPY + XOM（都是股票，相关性高）
<p>→ 市场跌，两只都跌</p>
<p>→ 风险不能分散</p>
<br>
<p>组合B：SPY + GLD（股票 + 黄金，相关性低）</p>
<p>→ 市场跌，SPY跌但GLD可能涨</p>
<p>→ 风险可以分散</p>
</code></pre>
<br>
<h3>场景3：选择适合的股票</h3>
<br>
<strong>根据Beta选择：</strong>
<ul>
<li><strong>保守投资者</strong> → 选Beta < 1的股票（波动小）</li>
<li><strong>激进投资者</strong> → 选Beta > 1的股票（波动大，可能收益高）</li>
</ul>
<br>
<strong>根据Alpha选择：</strong>
<ul>
<li><strong>长期投资</strong> → 选Alpha > 0的股票（有超额收益）</li>
<li><strong>短期投机</strong> → Alpha不重要，主要看Beta和波动</li>
</ul>
<br>
<hr>
<br>
<h2>📝 快速记忆口诀</h2>
<br>
<p>1. <strong>日收益率</strong> = (今天/昨天) - 1，用来公平比较</p>
<p>2. <strong>直方图</strong> = 看收益率分布，判断风险</p>
<p>3. <strong>均值</strong> = 平均赚多少，白色虚线</p>
<p>4. <strong>标准差</strong> = 波动大小，红色虚线，越大越危险</p>
<p>5. <strong>峰度</strong> = 极端事件频率，>3要小心</p>
<p>6. <strong>散点图</strong> = 看两只股票的关系</p>
<p>7. <strong>Beta</strong> = 市场敏感度，>1波动大，<1波动小</p>
<p>8. <strong>Alpha</strong> = 超额收益，>0是好股票</p>
<br>
<hr>
<br>
<h2>🔍 考试/作业常见问题</h2>
<br>
<h3>Q1: 如何计算日收益率？</h3>
<strong>A:</strong> <code>(price[t] / price[t-1]) - 1</code>
<ul>
<li>第一行设为0（没有前一天）</li>
</ul>
<br>
<h3>Q2: Beta = 1.5 意味着什么？</h3>
<strong>A:</strong> 市场涨1%，这只股票涨1.5%
<ul>
<li>波动比市场大，风险高但可能收益也高</li>
</ul>
<br>
<h3>Q3: 如何用直方图判断风险？</h3>
<strong>A:</strong> 
<ul>
<li>看标准差（Std）：越大越危险</li>
<li>看峰度（Kurtosis）：>3说明极端事件多</li>
<li>看分布形状：越分散越危险</li>
</ul>
<br>
<h3>Q4: 散点图如何反映两只股票的关系？</h3>
<strong>A:</strong>
<ul>
<li>点聚集在一条线上 = 相关性高（同向运动）</li>
<li>点分散 = 相关性低（独立）</li>
<li>线越陡 = Beta越大 = 波动越大</li>
</ul>
<br>
<h3>Q5: 为什么投资组合要选相关性低的股票？</h3>
<strong>A:</strong> 相关性低 = 一只跌时另一只可能涨 = 可以分散风险
<br>
<hr>
<br>
<h2>💡 总结</h2>
<br>
<strong>核心思想：</strong>
<p>1. <strong>日收益率</strong>让我们公平比较不同股票</p>
<p>2. <strong>直方图</strong>展示收益率的分布，帮我们评估风险</p>
<p>3. <strong>统计指标</strong>（均值、标准差、峰度）量化风险</p>
<p>4. <strong>散点图</strong>展示股票间的关系</p>
<p>5. <strong>Beta和Alpha</strong>帮助我们理解和选择股票</p>
<br>
<strong>实际应用：</strong>
<ul>
<li>评估单只股票的风险</li>
<li>构建低风险的投资组合</li>
<li>选择适合自己风险偏好的股票</li>
</ul>
<br>
<strong>记住：</strong> 在AI时代，你不需要死磕代码，但需要理解这些概念，这样才能：
<ul>
<li>看懂分析结果</li>
<li>做出正确决策</li>
<li>在考试/作业中回答概念性问题</li>
</ul>
<br>
    </div>
</body>
</html>